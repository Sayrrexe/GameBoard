{% extends "base.html" %}

{% block title %}–ì–ª–∞–≤–Ω–∞—è{% endblock %}

{% block content %}
<div class="main-container">
    <!-- –ë–æ–∫–æ–≤–∞—è –ø–∞–Ω–µ–ª—å —Å –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º–∏ -->
    <!-- –ë–æ–∫–æ–≤–∞—è –ø–∞–Ω–µ–ª—å —Å –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º–∏ –∏ –ø–æ–∏—Å–∫–æ–º -->
    <aside class="sidebar">

        <h2>–ü–æ–∏—Å–∫</h2>
        <form method="get" action="{% url 'index' %}" class="search-form">
            <input type="text" name="q" placeholder="–ü–æ–∏—Å–∫ –æ–±—ä—è–≤–ª–µ–Ω–∏–π..." value="{{ request.GET.q }}">
            <button type="submit">üîç</button>
        </form>

        <h2>–ö–∞—Ç–µ–≥–æ—Ä–∏–∏</h2>
    <!-- –°–ø–∏—Å–æ–∫ –∫–∞—Ç–µ–≥–æ—Ä–∏–π -->
        <ul class="category-list">
            <li><a href="{% url 'index' %}">–í—Å–µ</a></li>
            {% for category in categories %}
                <li><a href="{% url 'index' %}?category={{ category.name }}">{{ category.name }}</a></li>
            {% endfor %}
        </ul>
        
    </aside>


    <!-- –°–µ–∫—Ü–∏—è —Å –æ–±—ä—è–≤–ª–µ–Ω–∏—è–º–∏ -->
    <section class="ads-section">
    {% if ads %}
        <h1>–û–±—ä—è–≤–ª–µ–Ω–∏—è</h1>
        <div class="ads-grid">
            {% for ad in ads %}
                <div class="ad-card">
                    <h2>{{ ad.title|truncatechars:30 }}</h2>
                    <p>{{ ad.description|truncatewords:15|striptags }}</p>
                    <span class="category">{{ ad.category }}</span>
                    <div class="ad-footer">
                        {% if ad.author.avatar %}
                            <img src="{{ ad.author.avatar.url }}" alt="" class="user-avatar">
                            <p>{{ ad.author.username }}</p>
                        {% else %}
                            <span class="username">–°–æ–∑–¥–∞–ª: {{ ad.author.username }}</span>
                        {% endif %}
                        
                    </div>

                    <a href="/ad/{{ ad.id }}" class="btn btn-primary full-width-btn">–ü–æ–¥—Ä–æ–±–Ω–µ–µ</a>
                </div>
            {% endfor %}
        </div>
    {% else %}
        <h1>–ù–µ—Ç –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –æ–±—ä—è–≤–ª–µ–Ω–∏–π –ø–æ –≤–∞—à–µ–º—É –∑–∞–ø—Ä–æ—Å—É.</h1>
    {% endif %}
    </section>
</div>
{% endblock %}
